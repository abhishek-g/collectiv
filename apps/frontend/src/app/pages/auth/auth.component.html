<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <ul class="nav nav-tabs card-header-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link" [class.active]="activeTab === 'login'" (click)="switchTab('login')" type="button"
                i18n="@@auth.loginTab">
                Login
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" [class.active]="activeTab === 'signup'" (click)="switchTab('signup')"
                type="button" i18n="@@auth.signupTab">
                Sign Up
              </button>
            </li>
          </ul>
        </div>

        <div class="card-body p-4">
          <!-- Login Form -->
          @if (activeTab === 'login') {
            <div class="tab-content">
              <h4 class="mb-4" i18n="@@auth.welcomeBack">Welcome Back</h4>

              @if (loginError) {
                <div class="alert alert-danger" role="alert">
                  {{ loginError }}
                </div>
              }

              <form (ngSubmit)="onLogin()">
                <div class="mb-3">
                  <label for="loginEmail" class="form-label" i18n="@@auth.emailLabel">Email address</label>
                  <input type="email" class="form-control" id="loginEmail" [(ngModel)]="loginForm.email" name="loginEmail"
                    i18n-placeholder="@@auth.emailPlaceholder" placeholder="Enter your email" required />
                </div>

                <div class="mb-3">
                  <label for="loginPassword" class="form-label" i18n="@@auth.passwordLabel">Password</label>
                  <input type="password" class="form-control" id="loginPassword" [(ngModel)]="loginForm.password"
                    name="loginPassword" i18n-placeholder="@@auth.passwordPlaceholder" placeholder="Enter your password"
                    required />
                </div>

                <button type="submit" class="btn btn-primary w-100" [disabled]="loginLoading">
                  @if (loginLoading) {
                    <span class="spinner-border spinner-border-sm me-2" role="status"
                      aria-hidden="true"></span>
                  }
                  @if (!loginLoading) {
                    <span i18n="@@auth.loginButton">Login</span>
                  }
                  @if (loginLoading) {
                    <span i18n="@@auth.loggingIn">Logging in...</span>
                  }
                </button>
              </form>
            </div>
          }

          <!-- Signup Form -->
          @if (activeTab === 'signup') {
            <div class="tab-content">
              <h4 class="mb-4" i18n="@@auth.createAccount">Create Account</h4>

              @if (signupError) {
                <div class="alert alert-danger" role="alert">
                  {{ signupError }}
                </div>
              }

              @if (signupSuccess) {
                <div class="alert alert-success" role="alert">
                  {{ signupSuccess }}
                </div>
              }

              <form (ngSubmit)="onSignup()">
                <div class="mb-3">
                  <label for="signupName" class="form-label" i18n="@@auth.fullNameLabel">Full Name</label>
                  <input type="text" class="form-control" id="signupName" [(ngModel)]="signupForm.name" name="signupName"
                    i18n-placeholder="@@auth.fullNamePlaceholder" placeholder="Enter your full name" required />
                </div>

                <div class="mb-3">
                  <label for="signupEmail" class="form-label" i18n="@@auth.emailLabel">Email address</label>
                  <input type="email" class="form-control" id="signupEmail" [(ngModel)]="signupForm.email"
                    name="signupEmail" i18n-placeholder="@@auth.emailPlaceholder" placeholder="Enter your email"
                    required />
                </div>

                <div class="mb-3">
                  <label for="signupPassword" class="form-label" i18n="@@auth.passwordLabel">Password</label>
                  <input type="password" class="form-control" id="signupPassword" [(ngModel)]="signupForm.password"
                    name="signupPassword" i18n-placeholder="@@auth.passwordSignupPlaceholder"
                    placeholder="Enter your password (min 6 characters)" required minlength="6" />
                </div>

                <div class="mb-3">
                  <label for="signupPhone" class="form-label" i18n="@@auth.phoneLabel">Phone (Optional)</label>
                  <input type="tel" class="form-control" id="signupPhone" [(ngModel)]="signupForm.phone"
                    name="signupPhone" i18n-placeholder="@@auth.phonePlaceholder" placeholder="Enter your phone number" />
                </div>

                <button type="submit" class="btn btn-success w-100" [disabled]="signupLoading">
                  @if (signupLoading) {
                    <span class="spinner-border spinner-border-sm me-2" role="status"
                      aria-hidden="true"></span>
                  }
                  @if (!signupLoading) {
                    <span i18n="@@auth.signupButton">Sign Up</span>
                  }
                  @if (signupLoading) {
                    <span i18n="@@auth.creatingAccount">Creating account...</span>
                  }
                </button>
              </form>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
